# HuePress Art Factory - Development Tasks

## Current Phase: Ready for M2 ✅

### [x] M0: Foundations ✅ COMPLETE

- [x] Initialize Electron project with Electron Forge + Vite
- [x] Configure secure Electron defaults (contextIsolation, sandbox, CSP)
- [x] Set up TypeScript + React renderer
- [x] Create preload script with minimal contextBridge API
- [x] Set up SQLite database with better-sqlite3
- [x] Create initial database schema and migrations
- [x] Implement project folder layout (db/assets/exports)
- [x] Create settings store (JSON-based, replaced electron-store)
- [x] Add safeStorage integration for API key encryption
- [x] Verify secure IPC boundary with type-safe channels
- [x] Create path utilities (traversal prevention, sanitization)
- [x] Create logger utilities (electron-log wrapper)
- [x] Add Jobs IPC handler stubs (for M2)
- [x] Create unit tests (Zod schemas, path utilities)
- [x] Fix native module compilation (better-sqlite3 for Electron 39)

---

### [x] M1: Import + Library ✅ COMPLETE

- [x] Import page with JSON paste and validation
- [x] Flexible import (camelCase, comma-strings, Hard→Detailed)
- [x] Dedupe detection (skips duplicates on import)
- [x] Library grid view with cards
- [x] Item detail panel (slide-in)
- [x] Status change from detail panel
- [x] Single item delete from detail panel
- [x] Bulk selection mode
- [x] Bulk delete
- [x] Bulk status change
- [x] List/grid view toggle

---

### [x] M1.5: Library Enhancements ✅ COMPLETE

- [x] Sorting (asc/desc by name, category, skill, date, status)
- [x] Category filter dropdown
- [x] Skill level filter dropdown
- [x] Status filter chips
- [x] Filter badge showing active filter count
- [x] Click-outside-to-close for dropdown menus

**Deferred:**

- [ ] Batch rename UI
- [ ] Virtualized list for 10k+ items (react-window)
- [ ] Column resizing in list view
- [ ] Keyboard shortcuts (Cmd+A, Delete, arrow keys)

---

### [ ] M2: Generation Pipeline

- [x] Gemini API client wrapper ([services/gemini.ts](file:///Users/heymarcell/DEV/coloring-generator/src/main/services/gemini.ts))
- [x] Job queue implementation ([services/queue.ts](file:///Users/heymarcell/DEV/coloring-generator/src/main/services/queue.ts))
- [x] Prompt template engine with versioning
- [x] Image persistence + SHA256 checksums
- [x] Concurrency control and flow manaagement
- [x] Retry logic (via queue maxAttempts)
- [x] Basic QC checks (placeholder for M3)
- [x] Generation attempt history tracking (database schema)
- [x] Progress UI with cancellation
- [x] UI Polish (Header, Progress bar, Logs)
- [x] Regeneration progress overlay (when image exists)
- [x] Keyboard shortcuts (Up/Down for Idea, Left/Right for Version)
- [x] Fix Gemini 400 Invalid Argument Error (Model & Config)
- [x] Implement Auto-switch to new version on generation complete
- [x] Add resolution badge (top-left) to image preview

### [ ] M3: Review + Iteration

- [x] Full review UI with large preview
- [ ] Regenerate action
- [ ] Modify action (text instruction)
- [ ] Accept/Reject workflow
- [ ] QC flags display and notes
- [ ] Batch operations

### [ ] M4: Export + Release

- [ ] Export runner with profiles
- [ ] Deterministic ArtID naming
- [ ] JSON sidecar generation
- [ ] Packaging per OS (macOS, Windows)
- [ ] Code signing hooks
